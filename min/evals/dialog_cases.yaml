# 메리루트 회귀 테스트 케이스

cases:

  # 1) 조사 붙은 지역 인식(메이크업)
  - name: "makeup-region-particle"
    steps:
      - say: "메이크업은 청담역이 좋아"
    assert:
      budgets_has:
        category: "makeup"
        notes_contains: "지역:청담역"

  # 2) 조사 붙은 지역 인식(스튜디오)
  - name: "studio-region-particle"
    steps:
      - say: "스튜디오는 청담역에서 찾을래"
    assert:
      budgets_has:
        category: "studio"
        notes_contains: "지역:청담역"

  # 3) 스튜디오 지역 '교체' 동작(홍대→청담)
  - name: "studio-region-replace"
    steps:
      - say: "스튜디오는 홍대입구역"
      - say: "스튜디오는 청담역으로"
    assert:
      budgets_has:
        category: "studio"
        notes_exact: "지역:청담역"

  # 4) 드레스 하한(50만원) 미만 입력 시 재입력요청
  - name: "dress-too-low"
    steps:
      - say: "드레스 3.5"
    assert:
      reinput_contains: "dress"

  # 5) 예식 이벤트 '병합 유지': 장소 먼저 → 날짜만 갱신
  - name: "wedding-merge-keep-location"
    steps:
      - say: "예식은 교대에서 할거야"
      - say: "결혼식 10/26"
    assert:
      event:
        type: "wedding"
        date_like: "10/26"
        location_equals: "교대"   # parser가 '교대'로 저장

  # 6) 메이크업 단일 값(만원) ±10% 범위로 해석
  - name: "makeup-single-value-range"
    steps:
      - say: "메이크업 55"
    assert:
      budgets_range:
        category: "makeup"
        min_min: 49
        max_max: 61

  # 7) 추천 호출까지 파이프라인 동작(스튜디오)
  - name: "studio-recommend"
    steps:
      - say: "스튜디오는 청담역"
      - recommend:
          category: "studio"
          limit: 5
    assert:
      recommend_non_empty: true

  # 8) 홀 예산 상한 설정 후 추천 호출
  - name: "hall-budget-recommend"
    steps:
      - say: "홀 4000이하"
      - recommend:
          category: "hall"
          limit: 5
    assert:
      recommend_runs: true
